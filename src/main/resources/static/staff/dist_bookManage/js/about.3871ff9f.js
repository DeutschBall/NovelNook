"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[443],{50:function(t,o,e){e.r(o),e.d(o,{default:function(){return d}});var i=function(){var t=this,o=t._self._c;return o("div",[o("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"20px","margin-bottom":"20px"}},[o("h1",{staticStyle:{flex:"1","text-align":"center",margin:"0"}},[t._v("bookManage")]),o("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary"},on:{click:t.startAdd}},[t._v("addBook")]),o("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:t.startReturn}},[t._v("returnBook")])],1),o("el-table",{staticClass:"el-table",attrs:{data:t.bookList,stripe:"","highlight-current-row":"","empty-text":"暂无规则列表","header-cell-style":{textAlign:"center",background:"#fafafa"},"cell-style":{textAlign:"center"}}},[o("el-table-column",{attrs:{type:"index",label:""}}),o("el-table-column",{attrs:{prop:"bookname",label:"Book Name"}}),o("el-table-column",{attrs:{prop:"catagory",label:"catagory"}}),o("el-table-column",{attrs:{prop:"location",label:"location"}}),o("el-table-column",{attrs:{prop:"remain",label:"remain"}}),o("el-table-column",{attrs:{label:"Details"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"info"},on:{click:function(o){return t.showDetails(e.$index)}}},[t._v(" Details ")])]}}])}),o("el-table-column",{attrs:{label:"Operations"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticStyle:{"align-items":"center",padding:"2px"}},[o("el-button",{attrs:{type:"warning"},on:{click:function(o){return t.startEdit(e.$index)}}},[t._v("Update")]),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.deleteBook(e.$index)}}},[t._v("Delete")])],1)]}}])})],1),o("el-dialog",{attrs:{title:"book details",visible:t.detailsDialog},on:{"update:visible":function(o){t.detailsDialog=o}}},[o("el-descriptions",[o("el-descriptions-item",{attrs:{label:"book name"}},[t._v(t._s(t.detailFrom.bookname))]),o("el-descriptions-item",{attrs:{label:"press"}},[t._v(t._s(t.detailFrom.press))]),o("el-descriptions-item",{attrs:{label:"author"}},[t._v(t._s(t.detailFrom.author))]),o("el-descriptions-item",{attrs:{label:"publishtime"}},[t._v(t._s(t.detailFrom.publishtime))]),o("el-descriptions-item",{attrs:{label:"catagory"}},[t._v(t._s(t.detailFrom.catagory))]),o("el-descriptions-item",{attrs:{label:"remain"}},[t._v(t._s(t.detailFrom.remain)+" ")]),o("el-descriptions-item",{attrs:{label:"location"}},[t._v(" "+t._s(t.detailFrom.location)+" ")]),o("el-descriptions-item",{attrs:{label:"introduction"}},[t._v(" "+t._s(t.detailFrom.introduction)+" ")])],1)],1),o("el-dialog",{attrs:{title:this.title[t.dialogFlag-1],visible:t.visible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(o){t.visible=o}}},[o("el-form",{attrs:{model:t.dialogForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"bookname:"}},[o("el-input",{attrs:{placeholder:"Please enter bookname",clearable:""},model:{value:t.dialogForm.bookname,callback:function(o){t.$set(t.dialogForm,"bookname",o)},expression:"dialogForm.bookname"}})],1),o("el-form-item",{attrs:{label:"press:"}},[o("el-input",{attrs:{placeholder:"Please enter press",clearable:""},model:{value:t.dialogForm.press,callback:function(o){t.$set(t.dialogForm,"press",o)},expression:"dialogForm.press"}})],1),o("el-form-item",{attrs:{label:"author:"}},[o("el-input",{attrs:{placeholder:"Please enter author",clearable:""},model:{value:t.dialogForm.author,callback:function(o){t.$set(t.dialogForm,"author",o)},expression:"dialogForm.author"}})],1),o("el-form-item",{attrs:{label:"publishtime:"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"select data"},on:{change:t.handleDateChange},model:{value:t.dialogForm.publishtime,callback:function(o){t.$set(t.dialogForm,"publishtime",o)},expression:"dialogForm.publishtime"}})],1),o("el-form-item",{attrs:{label:"catagory:"}},[o("el-input",{attrs:{placeholder:"Please enter catagory",clearable:""},model:{value:t.dialogForm.catagory,callback:function(o){t.$set(t.dialogForm,"catagory",o)},expression:"dialogForm.catagory"}})],1),o("el-form-item",{attrs:{label:"remain:"}},[o("el-input",{attrs:{placeholder:"Please enter remain",clearable:""},model:{value:t.dialogForm.remain,callback:function(o){t.$set(t.dialogForm,"remain",t._n(o))},expression:"dialogForm.remain"}})],1),o("el-form-item",{attrs:{label:"introduction:"}},[o("el-input",{attrs:{placeholder:"Please enter introduction",clearable:""},model:{value:t.dialogForm.introduction,callback:function(o){t.$set(t.dialogForm,"introduction",o)},expression:"dialogForm.introduction"}})],1),o("el-form-item",{attrs:{label:"location:"}},[o("el-input",{attrs:{placeholder:"Please enter location",clearable:""},model:{value:t.dialogForm.location,callback:function(o){t.$set(t.dialogForm,"location",o)},expression:"dialogForm.location"}})],1)],1),1==t.dialogFlag?o("div",{staticClass:"button-container"},[o("div",{staticClass:"button-group"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("cancel")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addBook}},[t._v("confirm")])],1)]):2==t.dialogFlag?o("div",{staticClass:"button-container"},[o("div",{staticClass:"button-group"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("cancel ")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.editBook}},[t._v("confirm")])],1)]):t._e()],1),o("el-dialog",{attrs:{title:"return book",visible:t.returnDialog,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(o){t.returnDialog=o}}},[o("el-form",{attrs:{"label-width":"120px"}},[o("el-form-item",{attrs:{label:"borrowid:"}},[o("el-input",{attrs:{placeholder:"Please enter borrowid",clearable:""},model:{value:t.borrowid,callback:function(o){t.borrowid=o},expression:"borrowid"}})],1),o("el-form-item",{attrs:{label:"returntime:"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"select date"},on:{change:t.handleDateChange},model:{value:t.returntime,callback:function(o){t.returntime=o},expression:"returntime"}})],1)],1),o("div",{staticClass:"button-container"},[o("div",{staticClass:"button-group"},[o("el-button",{attrs:{size:"small"},on:{click:t.cancel_return}},[t._v("cancel ")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.returnBook}},[t._v("confirm")])],1)])],1)],1)},l=[],a=e(4161);var s={data(){return{bookList:[],visible:!1,dataListLoading:!1,title:["add book","edit book"],url:"http://localhost:8080/staff",detailsDialog:!1,detailFrom:{press:null,author:null,publishtime:null,remain:null,catagory:null,introduction:null,location:null},dialogFlag:0,dialogForm:{bookname:null,press:null,author:null,publishtime:null,remain:null,catagory:null,introduction:null,location:null},borrowid:null,returntime:null,returnDialog:!1}},mounted(){this.getBookList(),console.log("mounted")},methods:{getBookList(){a.Z.get(`${this.url}/book/show/all`).then((t=>{console.log("sucess"),console.log(t),this.bookList=t.data,this.dataListLoading=!0})).catch((t=>{console.log("getBookList失败了")}))},showDetails(t){this.detailsDialog=!0,console.log("showDetails的detailsDialog:",this.detailsDialog),console.log("index",t),this.detailFrom=this.bookList[t],console.log(this.showFrom)},startAdd(){this.visible=!0,this.dialogFlag=1},addBook(){if(console.log("this.dialogForm.bookname:",this.dialogForm.bookname),console.log("this.dialogForm.press:",this.dialogForm.press),console.log("this.dialogForm.author:",this.dialogForm.author),console.log("this.dialogForm.publishtime:",this.dialogForm.publishtime),console.log("this.dialogForm.catagory:",this.dialogForm.catagory),console.log("this.dialogForm.remain:",this.dialogForm.remain),console.log("this.dialogForm.introduction:",this.dialogForm.introduction),console.log("this.dialogForm.location:",this.dialogForm.location),null==this.dialogForm.bookname||void 0==this.dialogForm.bookname||""==this.dialogForm.bookname)this.$message({message:"bookname cannot be empty！",type:"warning"});else if(null==this.dialogForm.press||void 0==this.dialogForm.press||""==this.dialogForm.press)this.$message({message:"press cannot be empty！",type:"warning"});else if(null==this.dialogForm.author||void 0==this.dialogForm.author||""==this.dialogForm.author)this.$message({message:"author cannot be empty！",type:"warning"});else if(null==this.dialogForm.publishtime||void 0==this.dialogForm.publishtime||""==this.dialogForm.publishtime)this.$message({message:"publishtime cannot be empty！",type:"warning"});else if(null==this.dialogForm.catagory||void 0==this.dialogForm.catagory||""==this.dialogForm.catagory)this.$message({message:"catagory cannot be empty！",type:"warning"});else if(null==this.dialogForm.remain||void 0==this.dialogForm.remain||""==this.dialogForm.remain)this.$message({message:"remain cannot be empty！",type:"warning"});else if(null==this.dialogForm.introduction||void 0==this.dialogForm.introduction||""==this.dialogForm.introduction)this.$message({message:"introduction cannot be empty！",type:"warning"});else if(null==this.dialogForm.location||void 0==this.dialogForm.location||""==this.dialogForm.location)this.$message({message:"location cannot be empty！",type:"warning"});else{const t=this.dialogForm.publishtime,o=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=`${o}-${e}-${i}`;console.log("date:",l),a.Z.post(`${this.url}/book/add/${this.dialogForm.bookname}/${this.dialogForm.press}/${this.dialogForm.author}/${l}/${this.dialogForm.catagory}/${this.dialogForm.remain}/${this.dialogForm.introduction}/${this.dialogForm.location}`).then((t=>{console.log("addBook成功了",t),this.getBookList(),this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.$message({message:"Successfully added!",type:"success"})})).catch((t=>{console.log("addBook失败了"),this.$message({message:"Adding failed! Please try again or contact the developer.",type:"warning"})})),this.visible=!1}},startEdit(t){this.visible=!0,this.dialogFlag=2,console.log("要编辑的那一条",this.bookList[t]),this.dialogForm.bookid=this.bookList[t].bookid,this.dialogForm.bookname=this.bookList[t].bookname,this.dialogForm.press=this.bookList[t].press,this.dialogForm.author=this.bookList[t].author,this.dialogForm.publishtime=new Date(this.bookList[t].publishtime),console.log("staredit的this.dialogForm.publishtime：",this.dialogForm.publishtime),this.dialogForm.catagory=this.bookList[t].catagory,this.dialogForm.remain=this.bookList[t].remain,this.dialogForm.introduction=this.bookList[t].introduction,this.dialogForm.location=this.bookList[t].location},editBook(t){if(null==this.dialogForm.bookname||void 0==this.dialogForm.bookname||""==this.dialogForm.bookname)this.$message({message:"bookname cannot be empty！",type:"warning"});else if(null==this.dialogForm.press||void 0==this.dialogForm.press||""==this.dialogForm.press)this.$message({message:"press cannot be empty！",type:"warning"});else if(null==this.dialogForm.author||void 0==this.dialogForm.author||""==this.dialogForm.author)this.$message({message:"author cannot be empty！",type:"warning"});else if(null==this.dialogForm.publishtime||void 0==this.dialogForm.publishtime||""==this.dialogForm.publishtime)this.$message({message:"publishtime cannot be empty！",type:"warning"});else if(null==this.dialogForm.catagory||void 0==this.dialogForm.catagory||""==this.dialogForm.catagory)this.$message({message:"catagory cannot be empty！",type:"warning"});else if(null==this.dialogForm.remain||void 0==this.dialogForm.remain||""==this.dialogForm.remain)this.$message({message:"remain cannot be empty！",type:"warning"});else if(null==this.dialogForm.introduction||void 0==this.dialogForm.introduction||""==this.dialogForm.introduction)this.$message({message:"introduction cannot be empty！",type:"warning"});else if(null==this.dialogForm.location||void 0==this.dialogForm.location||""==this.dialogForm.location)this.$message({message:"location cannot be empty！",type:"warning"});else{console.log("edit的publishtime",this.dialogForm.publishtime);const t=this.dialogForm.publishtime,o=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=`${o}-${e}-${i}`;console.log("date:",l),a.Z.put(`${this.url}/book/update/${this.dialogForm.bookid}/${this.dialogForm.bookname}/${this.dialogForm.press}/${this.dialogForm.author}/${l}/${this.dialogForm.catagory}/${this.dialogForm.remain}/${this.dialogForm.introduction}/${this.dialogForm.location}`).then((t=>{console.log("edit Book成功了",t),this.getBookList(),this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.$message({message:"Successfully edited!",type:"success"})})).catch((t=>{console.log("editbook失败了"),this.$message({message:"Editing failed! Please try again or contact the developer.",type:"warning"})})),this.visible=!1}},handleDateChange(){console.log("date change:",this.dialogForm.publishtime)},cancel(){this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.visible=!1},deleteBook(t){this.$confirm("Are you sure to delete this book","提示",{confirmButtonText:"confirm",cancelButtonText:"cancel",type:"warning"}).then((()=>{let o=this.bookList[t].bookid;console.log("要被删除的 bookid:",o),a.Z["delete"](`${this.url}/book/delete/${o}`).then((t=>{this.getBookList(),console.log("删除成功"),this.$message({message:"Successfully deleted!",type:"success"})})).catch((t=>{console.log("删除失败了"),this.$message({message:"Delete failed! Please try again or contact the developer.",type:"warning"})}))}))},startReturn(){this.returnDialog=!0},cancel_return(){this.returnDialog=!1},returnBook(t){this.$confirm("Are you sure you want to return this book?","提示",{confirmButtonText:"confirm",cancelButtonText:"cancel",type:"warning"}).then((()=>{if(null==this.borrowid||void 0==this.borrowid||""==this.borrowid)this.$message({message:"borrowid cannot be empty！",type:"warning"});else if(null==this.returntime||void 0==this.returntime||""==this.returntime)this.$message({message:"returntime cannot be empty！",type:"warning"});else{console.log("要被删除的 borrowid:",this.borrowid),console.log("this.returntime:",this.returntime);const t=this.returntime,o=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),l=`${o}-${e}-${i}`;console.log("date:",l),a.Z.get(`${this.url}/book/return/${this.borrowid}/${l}`).then((t=>{console.log("还书成功",t.data),1==t.data?(this.$message({message:"Successfully edited!",type:"success"}),this.borrowid=null,this.returntime=null,this.returnDialog=!1):-1==t.data?this.$message({message:"The borrowid entered does not exist.",type:"warning"}):-2==t.data?this.$message({message:"The book has already been returned.",type:"warning"}):-3==t.data?this.$message({message:"The return date is earlier than the borrowing date.",type:"warning"}):0==t.data&&this.$message({message:"Other situations.",type:"warning"})})).catch((t=>{console.log("还书失败了",t),this.$message({message:"Book return failed!The borrowid entered may not exist.Alternatively,please try again or contact the developer.",type:"warning"})}))}}))}}},r=s,n=e(1001),m=(0,n.Z)(r,i,l,!1,null,null,null),d=m.exports}}]);
//# sourceMappingURL=about.3871ff9f.js.map