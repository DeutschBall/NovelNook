"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[443],{2323:function(o,t,e){e.r(t),e.d(t,{default:function(){return g}});var i=function(){var o=this,t=o._self._c;return t("div",[t("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"20px","margin-bottom":"20px"}},[t("h1",{staticStyle:{flex:"1","text-align":"center",margin:"0"}},[o._v("bookManage")]),t("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"Please enter the book name.",clearable:""},model:{value:o.input,callback:function(t){o.input=t},expression:"input"}}),t("el-button",{staticStyle:{"margin-right":"50px"},on:{click:o.searchBook}},[o._v("searchBook")]),t("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary"},on:{click:o.startAdd}},[o._v("addBook")]),t("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success"},on:{click:o.startReturn}},[o._v("returnBook")])],1),t("el-table",{staticClass:"el-table",attrs:{data:o.bookList,stripe:"","highlight-current-row":"","empty-text":"There is currently no book list available!","header-cell-style":{textAlign:"center",background:"#fafafa"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{type:"index",label:""}}),t("el-table-column",{attrs:{prop:"bookname",label:"Book Name"}}),t("el-table-column",{attrs:{prop:"catagory",label:"catagory"}}),t("el-table-column",{attrs:{prop:"location",label:"location"}}),t("el-table-column",{attrs:{prop:"remain",label:"remain"}}),t("el-table-column",{attrs:{label:"Details"},scopedSlots:o._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"info"},on:{click:function(t){return o.showDetails(e.$index)}}},[o._v(" Details ")])]}}])}),t("el-table-column",{attrs:{label:"Operations"},scopedSlots:o._u([{key:"default",fn:function(e){return[t("div",{staticStyle:{"align-items":"center",padding:"2px"}},[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return o.startEdit(e.$index)}}},[o._v("Update")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return o.deleteBook(e.$index)}}},[o._v("Delete")])],1)]}}])})],1),t("el-dialog",{attrs:{title:"book details",visible:o.detailsDialog},on:{"update:visible":function(t){o.detailsDialog=t}}},[t("el-descriptions",[t("el-descriptions-item",{attrs:{label:"book name",span:1}},[o._v(o._s(o.detailFrom.bookname))]),t("el-descriptions-item",{attrs:{label:"press",span:1}},[o._v(o._s(o.detailFrom.press))]),t("el-descriptions-item",{attrs:{label:"author",span:1}},[o._v(o._s(o.detailFrom.author))]),t("el-descriptions-item",{attrs:{label:"publishtime",span:1}},[o._v(o._s(o.detailFrom.publishtime))]),t("el-descriptions-item",{attrs:{label:"catagory",span:1}},[o._v(o._s(o.detailFrom.catagory))]),t("el-descriptions-item",{attrs:{label:"remain",span:1}},[o._v(o._s(o.detailFrom.remain)+" ")]),t("el-descriptions-item",{attrs:{label:"location",span:1}},[o._v(" "+o._s(o.detailFrom.location)+" ")]),t("el-descriptions-item",{attrs:{label:"isbn",span:1}},[o._v(" "+o._s(o.detailFrom.isbn)+" ")])],1),t("el-descriptions",[t("el-descriptions-item",{attrs:{label:"introduction",span:4}},[o._v(" "+o._s(o.detailFrom.introduction)+" ")])],1)],1),t("el-dialog",{attrs:{title:this.title[o.dialogFlag-1],visible:o.visible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){o.visible=t}}},[t("el-form",{attrs:{model:o.dialogForm,"label-width":"120px"}},[2==o.dialogFlag?t("el-form-item",{attrs:{label:"bookname:"}},[t("el-input",{attrs:{placeholder:"Please enter bookname",clearable:""},model:{value:o.dialogForm.bookname,callback:function(t){o.$set(o.dialogForm,"bookname",t)},expression:"dialogForm.bookname"}})],1):o._e(),2==o.dialogFlag?t("el-form-item",{attrs:{label:"press:"}},[t("el-input",{attrs:{placeholder:"Please enter press",clearable:""},model:{value:o.dialogForm.press,callback:function(t){o.$set(o.dialogForm,"press",t)},expression:"dialogForm.press"}})],1):o._e(),2==o.dialogFlag?t("el-form-item",{attrs:{label:"author:"}},[t("el-input",{attrs:{placeholder:"Please enter author",clearable:""},model:{value:o.dialogForm.author,callback:function(t){o.$set(o.dialogForm,"author",t)},expression:"dialogForm.author"}})],1):o._e(),2==o.dialogFlag?t("el-form-item",{attrs:{label:"publishtime:"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"select data"},on:{change:o.handleDateChange},model:{value:o.dialogForm.publishtime,callback:function(t){o.$set(o.dialogForm,"publishtime",t)},expression:"dialogForm.publishtime"}})],1):o._e(),2==o.dialogFlag?t("el-form-item",{attrs:{label:"catagory:"}},[t("el-input",{attrs:{placeholder:"Please enter catagory",clearable:""},model:{value:o.dialogForm.catagory,callback:function(t){o.$set(o.dialogForm,"catagory",t)},expression:"dialogForm.catagory"}})],1):o._e(),2==o.dialogFlag?t("el-form-item",{attrs:{label:"introduction:"}},[t("el-input",{attrs:{placeholder:"Please enter introduction",clearable:""},model:{value:o.dialogForm.introduction,callback:function(t){o.$set(o.dialogForm,"introduction",t)},expression:"dialogForm.introduction"}})],1):o._e(),1==o.dialogFlag?t("el-form-item",{attrs:{label:"isbn:"}},[t("el-row",[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{placeholder:"Please enter isbn.",clearable:""},model:{value:o.dialogForm.isbn,callback:function(t){o.$set(o.dialogForm,"isbn",t)},expression:"dialogForm.isbn"}})],1)],1)],1):o._e(),1==o.dialogFlag?t("el-form-item",{attrs:{label:"remain:"}},[t("el-input",{attrs:{placeholder:"Please enter remain",clearable:""},model:{value:o.dialogForm.remain,callback:function(t){o.$set(o.dialogForm,"remain",o._n(t))},expression:"dialogForm.remain"}})],1):o._e(),t("el-form-item",{attrs:{label:"location:"}},[t("el-input",{attrs:{placeholder:"Please enter location",clearable:""},model:{value:o.dialogForm.location,callback:function(t){o.$set(o.dialogForm,"location",t)},expression:"dialogForm.location"}})],1),1==o.dialogFlag?t("el-table",{staticClass:"el-table",attrs:{data:o.bar_codes,stripe:"","highlight-current-row":"","empty-text":"There is currently no barcode list available!","header-cell-style":{textAlign:"center",background:"#fafafa"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{type:"index",label:""}}),t("el-table-column",{attrs:{prop:"barcode",label:"Barcode"},scopedSlots:o._u([{key:"default",fn:function(o){return[t("img",{attrs:{src:o.row.barcode,alt:"Barcode"}})]}}],null,!1,212837575)})],1):o._e()],1),1==o.dialogFlag?t("div",{staticClass:"button-container"},[t("div",{staticClass:"button-group"},[t("el-button",{attrs:{size:"small"},on:{click:o.cancelAdd}},[o._v("cancel")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:o.add}},[o._v("confirm")])],1)]):2==o.dialogFlag?t("div",{staticClass:"button-container"},[t("div",{staticClass:"button-group"},[t("el-button",{attrs:{size:"small"},on:{click:o.cancel}},[o._v("cancel ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:o.editBook}},[o._v("confirm")])],1)]):o._e()],1),t("el-dialog",{attrs:{title:"return book",visible:o.returnDialog,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){o.returnDialog=t}}},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"barcode:"}},[t("el-input",{attrs:{placeholder:"Please enter barcode",clearable:""},model:{value:o.borrowid,callback:function(t){o.borrowid=t},expression:"borrowid"}})],1)],1),t("div",{staticClass:"button-container"},[t("div",{staticClass:"button-group"},[t("el-button",{attrs:{size:"small"},on:{click:o.cancel_return}},[o._v("cancel ")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:o.returnBook}},[o._v("confirm")])],1)])],1)],1)},a=[],l=e(4161);var s={data(){return{bookList:[],visible:!1,dataListLoading:!1,title:["add book","edit book"],url:"http://localhost:8080/staff",detailsDialog:!1,detailFrom:{press:null,author:null,publishtime:null,remain:null,catagory:null,introduction:null,location:null},dialogFlag:0,dialogForm:{bookname:null,press:null,author:null,publishtime:null,remain:null,catagory:null,introduction:null,location:null,isbn:null},borrowid:null,returntime:null,returnDialog:!1,input:"",bar_codes:[]}},mounted(){this.getBookList(),console.log("mounted")},methods:{getBookList(){console.log("getBookList"),l.Z.get(`${this.url}/book/show/all`).then((o=>{console.log("sucess"),console.log(o),this.bookList=o.data,this.dataListLoading=!0})).catch((o=>{console.log("getBookList失败了")}))},showDetails(o){this.detailsDialog=!0,console.log("showDetails的detailsDialog:",this.detailsDialog),console.log("index",o),this.detailFrom=this.bookList[o],console.log(this.showFrom)},startAdd(){this.visible=!0,this.dialogFlag=1},addBook(){if(console.log("this.dialogForm.bookname:",this.dialogForm.bookname),console.log("this.dialogForm.press:",this.dialogForm.press),console.log("this.dialogForm.author:",this.dialogForm.author),console.log("this.dialogForm.publishtime:",this.dialogForm.publishtime),console.log("this.dialogForm.catagory:",this.dialogForm.catagory),console.log("this.dialogForm.remain:",this.dialogForm.remain),console.log("this.dialogForm.introduction:",this.dialogForm.introduction),console.log("this.dialogForm.location:",this.dialogForm.location),null==this.dialogForm.bookname||void 0==this.dialogForm.bookname||""==this.dialogForm.bookname)this.$message({message:"bookname cannot be empty！",type:"warning"});else if(null==this.dialogForm.press||void 0==this.dialogForm.press||""==this.dialogForm.press)this.$message({message:"press cannot be empty！",type:"warning"});else if(null==this.dialogForm.author||void 0==this.dialogForm.author||""==this.dialogForm.author)this.$message({message:"author cannot be empty！",type:"warning"});else if(null==this.dialogForm.publishtime||void 0==this.dialogForm.publishtime||""==this.dialogForm.publishtime)this.$message({message:"publishtime cannot be empty！",type:"warning"});else if(null==this.dialogForm.catagory||void 0==this.dialogForm.catagory||""==this.dialogForm.catagory)this.$message({message:"catagory cannot be empty！",type:"warning"});else if(null==this.dialogForm.remain||void 0==this.dialogForm.remain||""==this.dialogForm.remain)this.$message({message:"remain cannot be empty！",type:"warning"});else if(null==this.dialogForm.introduction||void 0==this.dialogForm.introduction||""==this.dialogForm.introduction)this.$message({message:"introduction cannot be empty！",type:"warning"});else if(null==this.dialogForm.location||void 0==this.dialogForm.location||""==this.dialogForm.location)this.$message({message:"location cannot be empty！",type:"warning"});else{const o=this.dialogForm.publishtime,t=o.getFullYear(),e=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0"),a=`${t}-${e}-${i}`;console.log("date:",a),l.Z.post(`${this.url}/book/add/${this.dialogForm.bookname}/${this.dialogForm.press}/${this.dialogForm.author}/${a}/${this.dialogForm.catagory}/${this.dialogForm.remain}/${this.dialogForm.introduction}/${this.dialogForm.location}`).then((o=>{console.log("addBook成功了",o),this.getBookList(),this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.dialogForm.isbn=null,this.$message({message:"Successfully added!",type:"success"})})).catch((o=>{console.log("addBook失败了"),this.$message({message:"Adding failed! Please try again or contact the developer.",type:"warning"})})),this.visible=!1}},startEdit(o){this.visible=!0,this.dialogFlag=2,console.log("要编辑的那一条",this.bookList[o]),this.dialogForm.bookid=this.bookList[o].bookid,this.dialogForm.bookname=this.bookList[o].bookname,this.dialogForm.press=this.bookList[o].press,this.dialogForm.author=this.bookList[o].author,this.dialogForm.publishtime=new Date(this.bookList[o].publishtime),console.log("staredit的this.dialogForm.publishtime：",this.dialogForm.publishtime),this.dialogForm.catagory=this.bookList[o].catagory,this.dialogForm.remain=this.bookList[o].remain,this.dialogForm.introduction=this.bookList[o].introduction,this.dialogForm.location=this.bookList[o].location},editBook(o){if(null==this.dialogForm.bookname||void 0==this.dialogForm.bookname||""==this.dialogForm.bookname)this.$message({message:"bookname cannot be empty！",type:"warning"});else if(null==this.dialogForm.press||void 0==this.dialogForm.press||""==this.dialogForm.press)this.$message({message:"press cannot be empty！",type:"warning"});else if(null==this.dialogForm.author||void 0==this.dialogForm.author||""==this.dialogForm.author)this.$message({message:"author cannot be empty！",type:"warning"});else if(null==this.dialogForm.publishtime||void 0==this.dialogForm.publishtime||""==this.dialogForm.publishtime)this.$message({message:"publishtime cannot be empty！",type:"warning"});else if(null==this.dialogForm.catagory||void 0==this.dialogForm.catagory||""==this.dialogForm.catagory)this.$message({message:"catagory cannot be empty！",type:"warning"});else if(null==this.dialogForm.remain||void 0==this.dialogForm.remain||""==this.dialogForm.remain)this.$message({message:"remain cannot be empty！",type:"warning"});else if(null==this.dialogForm.introduction||void 0==this.dialogForm.introduction||""==this.dialogForm.introduction)this.$message({message:"introduction cannot be empty！",type:"warning"});else if(null==this.dialogForm.location||void 0==this.dialogForm.location||""==this.dialogForm.location)this.$message({message:"location cannot be empty！",type:"warning"});else{console.log("edit的publishtime",this.dialogForm.publishtime);const o=this.dialogForm.publishtime,t=o.getFullYear(),e=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0"),a=`${t}-${e}-${i}`;console.log("date:",a),l.Z.put(`${this.url}/book/update/${this.dialogForm.bookid}/${this.dialogForm.bookname}/${this.dialogForm.press}/${this.dialogForm.author}/${a}/${this.dialogForm.catagory}/${this.dialogForm.remain}/${this.dialogForm.introduction}/${this.dialogForm.location}`).then((o=>{console.log("edit Book成功了",o),this.getBookList(),this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.dialogForm.isbn=null,this.$message({message:"Successfully edited!",type:"success"})})).catch((o=>{console.log("editbook失败了"),this.$message({message:"Editing failed! Please try again or contact the developer.",type:"warning"})})),this.visible=!1}},handleDateChange(){console.log("date change:",this.dialogForm.publishtime)},cancel(){this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.dialogForm.isbn=null,this.visible=!1},deleteBook(o){this.$confirm("Are you sure to delete this book","提示",{confirmButtonText:"confirm",cancelButtonText:"cancel",type:"warning"}).then((()=>{let t=this.bookList[o].bookid;console.log("要被删除的 bookid:",t),l.Z["delete"](`${this.url}/book/delete/${t}`).then((o=>{if(this.getBookList(),console.log("调用删除成功,res.data",o.data),o.data.length>1||o.data[0]>0){let t="";for(let i=0;i<o.data.length;i++)t+=o.data[i],i<o.data.length-1&&(t+=",");let e="Users with userid ";e+=t,e+=" are currently borrowing this book!",this.$message({message:e,type:"warning"})}else-1==o.data?this.$message({message:"Successfully deleted!",type:"success"}):-2==o.data&&this.$message({message:"Delete failed! Please try again or contact the developer.",type:"warning"})})).catch((o=>{console.log("删除失败了"),this.$message({message:"Delete failed! Please try again or contact the developer.",type:"warning"})}))}))},startReturn(){this.returnDialog=!0},cancel_return(){this.returnDialog=!1},returnBook(o){this.$confirm("Are you sure you want to return this book?","提示",{confirmButtonText:"confirm",cancelButtonText:"cancel",type:"warning"}).then((()=>{if(null==this.borrowid||void 0==this.borrowid||""==this.borrowid)this.$message({message:"Barcode cannot be empty！",type:"warning"});else{console.log("要被删除的 Barcode:",this.borrowid);const o=new Date,t=o.getFullYear(),e=o.getMonth()+1,i=o.getDate(),a=`${t}-${e}-${i}`;console.log("今天的date:",a),l.Z.get(`${this.url}/book/return/${this.borrowid}/${a}`).then((o=>{console.log("还书方法调用成功",o.data),1==o.data?(this.$message({message:"Successfully returned!",type:"success"}),this.borrowid=null,this.returntime=null,this.returnDialog=!1):-1==o.data?this.$message({message:"The barcode entered does not exist.",type:"warning"}):-2==o.data?this.$message({message:"The book has already been returned.",type:"warning"}):-3==o.data?this.$message({message:"The return date is earlier than the borrowing date.",type:"warning"}):0==o.data&&this.$message({message:"Wrong.",type:"warning"})})).catch((o=>{console.log("还书失败了",o),this.$message({message:"Book return failed!The barcode entered may not exist.Alternatively,please try again or contact the developer.",type:"warning"})}))}}))},searchBook(){console.log("input:",this.input),""!=this.input&&void 0!=this.input&&null!=this.input?l.Z.get(`${this.url}/book/get/${this.input}`).then((o=>{console.log("searchBook sucess"),console.log(o),this.bookList=[],this.bookList[0]=o.data,this.$message({message:"Successfully searched bookreturned!",type:"success"})})).catch((o=>{console.log("Searched book failed"),this.$message({message:"Failed to query books！",type:"warning"})})):this.getBookList()},addByISBN(){console.log("isbn:",this.dialogForm.isbn),l.Z.get(`${this.url}/book/getByISBN/${this.dialogForm.isbn}`).then((o=>{console.log("getByISBN,sucess"),console.log(o.data),this.dialogForm.author=o.data.author,this.dialogForm.bookname=o.data.bookname,this.dialogForm.catagory=o.data.catagory,this.dialogForm.introduction=o.data.introduction,this.dialogForm.press=o.data.press,this.dialogForm.publishtime=o.data.publishtime,this.$message({message:"Successfully searched!",type:"success"})})).catch((o=>{console.log("getByISBN failed"),this.$message({message:"Failed to getByISBN！",type:"warning"})}))},add(){console.log("this.dialogForm.isbn:",this.dialogForm.isbn),console.log("this.dialogForm.remain:",this.dialogForm.remain),console.log("this.dialogForm.location:",this.dialogForm.location),l.Z.get(`${this.url}/book/addByISBN/${this.dialogForm.isbn}/${this.dialogForm.remain}/${this.dialogForm.location}`).then((o=>{if(console.log("add, success"),console.log(o.data),-1==o.data)this.$message({message:"接口调用次数达到上限",type:"warning"});else if(o.data>0){this.$message({message:"Successfully added book!",type:"success"});let t=[];for(let e=1;e<=this.dialogForm.remain;e++){let i="http://localhost:8080/barcodes/";i+=o.data,i+="0000",i+=e,i+=".jpg",t[e]={},t[e].barcode=i}console.log("bar_codes:",t),this.bar_codes=t}else this.$message({message:"其他情况",type:"warning"})})).catch((o=>{console.log("Adding book failed",o),this.$message({message:"Failed to getByISBN!",type:"warning"})}))},cancelAdd(){this.dialogForm.bookname=null,this.dialogForm.press=null,this.dialogForm.author=null,this.dialogForm.publishtime=null,this.dialogForm.catagory=null,this.dialogForm.remain=null,this.dialogForm.introduction=null,this.dialogForm.location=null,this.dialogForm.isbn=null,this.visible=!1}}},r=s,n=e(1001),d=(0,n.Z)(r,i,a,!1,null,null,null),g=d.exports}}]);
//# sourceMappingURL=about.8328299a.js.map