"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[443],{5432:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"patron-list"},[e("h1",[t._v("Patron Manage"),e("button",{staticClass:"head-btn",on:{click:function(e){t.addModal=!0}}},[t._v("+ New patron")]),t._v(" "),e("button",{staticClass:"head-btn",on:{click:function(e){t.searchModal=!0}}},[t._v("Search")])]),e("table",[t._m(0),e("tbody",t._l(t.displayedPatrons,(function(a){return e("tr",[e("td",[e("img",{attrs:{src:"http://localhost:8080/"+a.avatar,alt:"Patron Avatar"}})]),e("td",[t._v(t._s(a.userid))]),e("td",[t._v(t._s(a.firstname))]),e("td",[t._v(t._s(a.lastname))]),e("td",[t._v(t._s(a.email))]),e("td",[t._v(t._s(a.telephone))]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[e("button",{staticClass:"tr-delete-btn",on:{click:function(e){return t.deletePatron(a.userid)}}},[t._v("  delete  ")]),t._v("      "),e("button",{staticClass:"tr-renew-btn",on:{click:function(e){t.showModal=a}}},[t._v("  renew  ")])])])})),0)]),e("div",{staticClass:"pagination"},[e("button",{staticClass:"ios-button",attrs:{disabled:1===t.currentPage},on:{click:function(e){t.currentPage--}}},[t._v("<<· ")]),e("span",[t._v("Page: "+t._s(t.currentPage)+" | "+t._s(t.totalPages))]),e("button",{staticClass:"ios-button",attrs:{disabled:t.currentPage===t.totalPages},on:{click:function(e){t.currentPage++}}},[t._v(" ·>>")])]),t.showModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",{staticStyle:{"font-size":"24px","font-weight":"bold","margin-bottom":"0","margin-top":"0"}},[t._v("Renew Patron:"+t._s(t.showModal.userid))]),e("form",{staticStyle:{display:"flex","flex-direction":"column","align-items":"flex-start"}},[e("div",{staticClass:"window-div"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.showModal.firstname,expression:"showModal.firstname"}],staticClass:"window_input",domProps:{value:t.showModal.firstname},on:{input:function(e){e.target.composing||t.$set(t.showModal,"firstname",e.target.value)}}}),t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.showModal.lastname,expression:"showModal.lastname"}],staticClass:"window_input",domProps:{value:t.showModal.lastname},on:{input:function(e){e.target.composing||t.$set(t.showModal,"lastname",e.target.value)}}}),t._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:t.showModal.email,expression:"showModal.email"}],staticClass:"window_input",domProps:{value:t.showModal.email},on:{input:function(e){e.target.composing||t.$set(t.showModal,"email",e.target.value)}}}),t._m(4),e("input",{directives:[{name:"model",rawName:"v-model",value:t.showModal.telephone,expression:"showModal.telephone"}],staticClass:"window_input",domProps:{value:t.showModal.telephone},on:{input:function(e){e.target.composing||t.$set(t.showModal,"telephone",e.target.value)}}}),t._m(5),e("input",{directives:[{name:"model",rawName:"v-model",value:t.showModal.password,expression:"showModal.password"}],staticClass:"window_input",domProps:{value:t.showModal.password},on:{input:function(e){e.target.composing||t.$set(t.showModal,"password",e.target.value)}}})]),e("br"),e("div",{staticClass:"window-button"},[e("button",{staticClass:"window-submit",on:{click:function(e){return e.preventDefault(),t.renewPatron(t.showModal.userid,t.showModal.password,t.showModal.firstname,t.showModal.lastname,t.showModal.email,t.showModal.telephone)}}},[t._v("Submit")]),t._v("              "),e("button",{staticClass:"window-submit cancel-button",on:{click:function(e){e.preventDefault(),t.showModal=t.canreload()}}},[t._v("Cancel")])])])])]):t._e(),t.addModal?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("h2",{staticStyle:{"font-size":"24px","font-weight":"bold","margin-bottom":"0","margin-top":"0"}},[t._v("Add A New Patron")]),e("form",{staticStyle:{display:"flex","flex-direction":"column","align-items":"flex-start"}},[e("div",{staticClass:"window-div"},[t._m(6),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"window_input",domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),t._m(7),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"window_input",domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),t._m(8),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"window_input",domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(9),e("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"}],staticClass:"window_input",domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})]),e("br"),e("div",{staticClass:"window-button"},[e("button",{staticClass:"window-submit",on:{click:function(e){return e.preventDefault(),t.addPatron(t.firstName,t.lastName,t.email,t.telephone)}}},[t._v("Submit")]),t._v("              "),e("button",{staticClass:"window-submit cancel-button",on:{click:function(e){t.addModal=!1}}},[t._v("Cancel")])])])])]):t._e(),t.searchModal?e("div",{staticClass:"modal-search"},[e("div",{staticClass:"modal-content-search"},[e("div",{staticClass:"flex-container"},[e("label",{attrs:{for:"searchBy"}},[t._v("Search By:")]),t._v("   "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.searchBy,expression:"searchBy"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.searchBy=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"userid"}},[t._v("ID")]),e("option",{attrs:{value:"firstname"}},[t._v("firstName")]),e("option",{attrs:{value:"lastname"}},[t._v("lastName")])]),t._v("    "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],attrs:{type:"text",placeholder:"Enter keyword"},domProps:{value:t.searchKeyword},on:{input:function(e){e.target.composing||(t.searchKeyword=e.target.value)}}}),t._v("      "),e("button",{staticClass:"window-submit",on:{click:function(e){return e.preventDefault(),t.search(t.searchBy,t.searchKeyword)}}},[t._v("Search")]),t._v("    "),e("button",{staticClass:"window-submit cancel-button",on:{click:function(e){t.searchModal=!1}}},[t._v("Close")])]),e("table",[t._m(10),e("tbody",t._l(this.searchList,(function(a){return e("tr",[e("td",[e("img",{attrs:{src:"http://localhost:8080/"+a.avatar,alt:"Patron Avatar"}})]),e("td",[t._v(t._s(a.userid))]),e("td",[t._v(t._s(a.firstname))]),e("td",[t._v(t._s(a.lastname))]),e("td",[t._v(t._s(a.email))]),e("td",[t._v(t._s(a.telephone))]),e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[e("button",{staticClass:"tr-delete-btn",on:{click:function(e){return t.deletePatron(a.userid)}}},[t._v("  delete  ")]),t._v("      "),e("button",{staticClass:"tr-renew-btn",on:{click:function(e){t.showModal=a}}},[t._v("  renew  ")])])])})),0)])])]):t._e()])},o=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Avatar")]),e("th",[t._v("Patron ID")]),e("th",[t._v("First Name")]),e("th",[t._v("Last Name")]),e("th",[t._v("Email")]),e("th",[t._v("Telephone")]),e("th",[t._v("Operation")])])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"firstName"}},[t._v("First Name:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"lastName"}},[t._v("Last Name:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"email"}},[t._v("Email:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"telephone"}},[t._v("Telephone:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"password"}},[t._v("Password:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"firstName"}},[t._v("First Name:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"lastName"}},[t._v("Last Name:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"email"}},[t._v("Email:"),e("br")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"window-label",attrs:{for:"telephone"}},[t._v("Telephone:"),e("br")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Avatar")]),e("th",[t._v("Patron ID")]),e("th",[t._v("First Name")]),e("th",[t._v("Last Name")]),e("th",[t._v("Email")]),e("th",[t._v("Telephone")]),e("th",[t._v("Operation")])])])}],n=(a(7658),a(4161));const l={baseURL:"http://localhost:8080/staff/patron"};var i=l;const r={showall(){return n.Z.get(`${i.baseURL}/show/all`)},deleteone(t){n.Z["delete"](`${i.baseURL}/delete/${t}`).then((t=>{console.log(t.data)})).catch((t=>{console.log(t)}))},prenew(t,e,a,s,o,l){n.Z.put(`${i.baseURL}/update/${t}/${e}/${a}/${s}/${o}/${l}`).then((t=>{})).catch((t=>{console.log(t)}))},addnew(t,e,a,s){n.Z.post(`${i.baseURL}/add/${t}/${e}/${a}/${s}`).then((t=>{alert("Userid of this new patron: "+t.data.userid+"\nPassword of this new patron: "+t.data.password),location.reload()})).catch((t=>{console.log(t)}))},searchInfo(t,e){return n.Z.get(`${i.baseURL}/get/${t}/${e}`)}};var c=r,d={data(){return{patronList:[],currentPage:1,pageSize:10,showModal:!1,password:"",addModal:!1,searchModal:!1,searchBy:"ID",searchKeyword:"",searchList:[]}},mounted(){c.showall().then((t=>{console.log(t.data),this.patronList=t.data}))},computed:{displayedPatrons(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.patronList.slice(t,e)},totalPages(){return Math.ceil(this.patronList.length/this.pageSize)}},methods:{search(t,e){c.searchInfo(t,e).then((e=>{"userid"==t?this.searchList.push(e.data):this.searchList=e.data}))},deletePatron(t){if(confirm(`确认要删除PatronID:${t}的用户信息吗？`)){const e=this.patronList.findIndex((e=>e.userid===t));-1!==e&&this.patronList.splice(e,1);const a=this.searchList.findIndex((e=>e.userid===t));-1!==a&&this.searchList.splice(a,1),c.deleteone(t)}},canreload(){this.showModal=!1,location.reload()},renewPatron(t,e,a,s,o,n){this.showModal=!1,c.prenew(t,e,a,s,o,n)},addPatron(t,e,a,s){c.addnew(t,e,a,s)}}},u=d,m=a(1001),v=(0,m.Z)(u,s,o,!1,null,null,null),h=v.exports}}]);
//# sourceMappingURL=about.fcb3ad9f.js.map